!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Yngwie=e():t.Yngwie=e()}(self,(function(){return(()=>{"use strict";var t={d:(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{Controller:()=>i,Element:()=>s,Node:()=>n,TextNode:()=>o,transform:()=>a});class r extends Error{constructor(t,e){super(t),this.data=`${e}`}log(){console.log(this.stack),console.log("What Failed: ",this.data)}}class n{constructor(t){this._value=t,this._parent=void 0,this._first=void 0,this._last=void 0,this._next=void 0,this._prev=void 0}children(){let t=this._first,e=[];for(;t;)e.push(t),t=t._next;return e}append(t){if(t instanceof n)return t._parent&&t.detach(),void 0!==this._first?(t._prev=this._last,this._last._next=t,this._last=t):(this._first=t,this._last=t),t._parent=this,this;throw new r("Can only apppend YngwieNode to other YngwieNodes",t)}appends(t){return t.reduce(((t,e)=>this.append(e)),this)}detach(){return this._prev?this._prev._next=this._next:this._parent&&(this._parent._first=this._next),this._next&&(this._next._prev=this._prev),this._next=void 0,this._prev=void 0,this._parent=void 0,this}insertBefore(t){if(t instanceof n)return this._prev?this._prev._next=t:this._parent&&(this._parent._first=t),t._prev=this._prev,t._next=this,t._parent=this._parent,this;throw new r("Can only insert a YngwieNode before other YngwieNodes",t)}replaceWith(t){if(t instanceof n)return this.insertBefore(t),this.detach(),t;throw new r("Can only replace a YngwieNode with another YngwieNode",t)}clone(){let t=`${this._value}`,e=new n(t);return this.children().reduce(((t,r)=>(e=r.clone(),t.append(e))),e)}step(t,e){return next=t(this,e),next&&next.step(t,e),e}parse(t,e){return n.parse(this,(r=>{e=t(r,e)})),e}static init(t){return new n(t)}static parse(t,e){if(!(t instanceof n))throw new r("Can only parse a YngwieNode",t);for(e(t),t=t._first;t;)n.parse(t,e),t=t._next}}class i{constructor(t,e){this._evtName=t,this._fns=e||[]}add(t){return this._fns.push(t),this}clone(){let t=`${this._evtName}`,e=this._fns.map((t=>t.toString()));return new i(t,e)}render(t){return this._fns.reduce(((t,e)=>(t.addEventListener(this._evtName,e),t)),t)}static init(t,e){return new i(t,!0===Array.isArray(e)?e:[e])}}class s extends n{constructor(t,e,r,n){super(t),this._attribs=e||{},this._text=void 0===r?null:r,this._controllers=[]}attribs(t){return void 0===t?this._attribs:(this._attribs=t,this)}hasAttribute(t){return this._attribs.hasOwnProperty(t)}getAttribute(t){return this._attribs[t]}setAttribute(t,e){return this._attribs[t]=e,this}text(t){return void 0===t?this._text:(this._text=t,this)}getElementsByTagName(t){return this.parse(((e,r)=>(r._value===t&&e.push(r),e)),[])}getElementsByAttribute(t,e){return this.parse(((r,n)=>(r instanceof s&&r.hasAttribute(t)&&(void 0===e||r.getAttribute(t)===e)&&n.push(r),n)),[])}getElementsByClass(t){return this.getElementsByAttribute("class",t)}getElementByID(t){return this.getElementsByAttribute("id",t).pop()}on(t,e){let r=i.init(t,e);return this._controllers.push(r),this}clone(){let t=`${this._value}`,e=Object.keys(this._attribs).reduce(((t,e)=>(t[e]=`${this._attribs[e]}`,t)),{}),r=void 0!==this._text?`${this._text}`:void 0,n=this._controllers.map((t=>t.clone())),i=new s(t,e,r,n);return this.children().reduce(((t,e)=>(e=e.clone(),t.append(e))),i)}render(t){let e=Object.keys(this._attribs).reduce(((t,e)=>(t.setAttribute(e,this._attribs[e]),t)),document.createElement(this._value));if(e=this._controllers.reduce(((t,e)=>e.render(t)),e),"string"==typeof this._text){let t=document.createTextNode(this._text);e.appendChild(t)}let r=this.children().reduce(((t,e)=>(e=e.render(),t.appendChild(e),t)),e);return void 0!==t&&("string"==typeof t?document.querySelector(t).appendChild(r):t.appendChild(r)),r}static init(t,e,r,n){return new s(t,e,r,n)}static renderTo(t,e){let n="string"==typeof t?document.querySelector(t):t;return e.reduce(((t,e)=>{if(e instanceof s)return e.render(t),t;throw new r("Only YngwieElement can be rendered to target",e)}),n)}static inject(t,e){if(e instanceof s){let r="string"==typeof t?document.querySelector(t):t,n=e.render();return r.replaceWith(n),r}throw new r("Only YngwieElement can be injected into target",e)}}class o extends n{constructor(t){super(t)}render(){return document.createTextNode(this._value)}append(t){if("string"==typeof t)return this._value+=t,this;throw new r("Only STRINGs can append YngwieTextNodes",t)}clone(){return new o(`${this._value}`)}init(t){return new o(t)}}function a(t){return h("string"==typeof t?function(t){return(new DOMParser).parseFromString(t,"text/html").body.firstElementChild}(t):t)}function h(t,e){if(1===t.nodeType){let r=function(t){return Array.from(t.attributes).reduce(((t,e)=>(t[e.name]=e.value,t)),{})}(t),n=new s(t.tagName,r);e=void 0===e?n:e.append(n)}if(3===t.nodeType){let r=new o(t.nodeValue);e=void 0===e?r:e.append(r)}for(t=t.firstChild;t;){let r=h(t);void 0!==r&&e.append(r),t=t.nextSibling}return e}return e})()}));